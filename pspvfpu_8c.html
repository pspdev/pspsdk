<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSPSDK: vfpu/pspvfpu.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PSPSDK<span id="projectnumber">&#160;2025-09-15</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('pspvfpu_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pspvfpu.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;malloc.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="pspthreadman_8h_source.html">pspthreadman.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pspvfpu_8h_source.html">pspvfpu.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pspvfpu.c:</div>
<div class="dyncontent">
<div class="center"><img src="pspvfpu_8c__incl.png" border="0" usemap="#avfpu_2pspvfpu_8c" alt=""/></div>
<map name="avfpu_2pspvfpu_8c" id="avfpu_2pspvfpu_8c">
<area shape="rect" title=" " alt="" coords="134,5,240,31"/>
<area shape="rect" title=" " alt="" coords="5,79,75,105"/>
<area shape="poly" title=" " alt="" coords="163,34,80,74,78,69,161,29"/>
<area shape="rect" title=" " alt="" coords="99,79,162,105"/>
<area shape="poly" title=" " alt="" coords="180,33,152,68,147,65,175,30"/>
<area shape="rect" href="pspthreadman_8h.html" title=" " alt="" coords="186,79,299,105"/>
<area shape="poly" title=" " alt="" coords="198,30,226,65,222,68,194,33"/>
<area shape="rect" href="pspvfpu_8h.html" title=" " alt="" coords="324,79,401,105"/>
<area shape="poly" title=" " alt="" coords="218,29,320,70,318,75,216,34"/>
<area shape="rect" href="psptypes_8h.html" title=" " alt="" coords="201,226,284,252"/>
<area shape="poly" title=" " alt="" coords="221,107,195,127,174,154,172,171,179,187,192,202,209,216,206,220,189,206,174,190,167,172,170,152,191,123,218,103"/>
<area shape="rect" href="pspkerneltypes_8h.html" title=" " alt="" coords="184,153,302,178"/>
<area shape="poly" title=" " alt="" coords="245,105,245,137,240,137,240,105"/>
<area shape="rect" href="pspdebug_8h.html" title=" " alt="" coords="326,153,413,178"/>
<area shape="poly" title=" " alt="" coords="265,103,336,142,333,147,263,108"/>
<area shape="rect" title=" " alt="" coords="211,300,274,326"/>
<area shape="poly" title=" " alt="" coords="245,252,245,284,240,284,240,252"/>
<area shape="poly" title=" " alt="" coords="245,179,245,211,240,211,240,179"/>
<area shape="poly" title=" " alt="" coords="349,181,279,221,276,216,347,177"/>
<area shape="rect" href="pspmoduleinfo_8h.html" title=" " alt="" coords="312,226,427,252"/>
<area shape="poly" title=" " alt="" coords="372,179,372,211,367,211,367,179"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpspvfpu__context.html">pspvfpu_context</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a81eeb3ca3337d4e47ad8fcd26536d857" id="r_a81eeb3ca3337d4e47ad8fcd26536d857"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81eeb3ca3337d4e47ad8fcd26536d857">NMAT</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a81eeb3ca3337d4e47ad8fcd26536d857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae18fd4698199e1ab4a6200fe8b684510" id="r_ae18fd4698199e1ab4a6200fe8b684510"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae18fd4698199e1ab4a6200fe8b684510">SV</a>(N)</td></tr>
<tr class="separator:ae18fd4698199e1ab4a6200fe8b684510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8ea4f9d8f51cab47a2c77fecf24c11a" id="r_af8ea4f9d8f51cab47a2c77fecf24c11a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8ea4f9d8f51cab47a2c77fecf24c11a">LV</a>(N)</td></tr>
<tr class="separator:af8ea4f9d8f51cab47a2c77fecf24c11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a660efc6315092c80b449446cd3eed6a8" id="r_a660efc6315092c80b449446cd3eed6a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a660efc6315092c80b449446cd3eed6a8">pspvfpu_use_matrices</a> (struct <a class="el" href="structpspvfpu__context.html">pspvfpu_context</a> *c, <a class="el" href="pspvfpu_8h.html#aeba2787b48612341054003bf6574dc46">vfpumatrixset_t</a> keepset, <a class="el" href="pspvfpu_8h.html#aeba2787b48612341054003bf6574dc46">vfpumatrixset_t</a> tempset)</td></tr>
<tr class="memdesc:a660efc6315092c80b449446cd3eed6a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use a set of VFPU matrices.  <br /></td></tr>
<tr class="separator:a660efc6315092c80b449446cd3eed6a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56d82cb9dd0e9586871bc73a85935800" id="r_a56d82cb9dd0e9586871bc73a85935800"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structpspvfpu__context.html">pspvfpu_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a56d82cb9dd0e9586871bc73a85935800">pspvfpu_initcontext</a> (void)</td></tr>
<tr class="memdesc:a56d82cb9dd0e9586871bc73a85935800"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare to use the VFPU.  <br /></td></tr>
<tr class="separator:a56d82cb9dd0e9586871bc73a85935800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53928edd03902ad8c1a36bf2206f6e41" id="r_a53928edd03902ad8c1a36bf2206f6e41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53928edd03902ad8c1a36bf2206f6e41">pspvfpu_deletecontext</a> (struct <a class="el" href="structpspvfpu__context.html">pspvfpu_context</a> *c)</td></tr>
<tr class="memdesc:a53928edd03902ad8c1a36bf2206f6e41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a VFPU context.  <br /></td></tr>
<tr class="separator:a53928edd03902ad8c1a36bf2206f6e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af8ea4f9d8f51cab47a2c77fecf24c11a" name="af8ea4f9d8f51cab47a2c77fecf24c11a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8ea4f9d8f51cab47a2c77fecf24c11a">&#9670;&#160;</a></span>LV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LV</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>N</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keyword">asm</span>(<span class="stringliteral">&quot;lv.q       c&quot;</span>#N<span class="stringliteral">&quot;00,  0 + %0\n&quot;</span>     \</div>
<div class="line">            <span class="stringliteral">&quot;lv.q       c&quot;</span>#N<span class="stringliteral">&quot;10, 16 + %0\n&quot;</span>     \</div>
<div class="line">            <span class="stringliteral">&quot;lv.q       c&quot;</span>#N<span class="stringliteral">&quot;20, 32 + %0\n&quot;</span>     \</div>
<div class="line">            <span class="stringliteral">&quot;lv.q       c&quot;</span>#N<span class="stringliteral">&quot;30, 48 + %0\n&quot;</span>     \</div>
<div class="line">            : : <span class="stringliteral">&quot;m&quot;</span> (c-&gt;fpregs[N * 4*4])        \</div>
<div class="line">            : <span class="stringliteral">&quot;memory&quot;</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a81eeb3ca3337d4e47ad8fcd26536d857" name="a81eeb3ca3337d4e47ad8fcd26536d857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81eeb3ca3337d4e47ad8fcd26536d857">&#9670;&#160;</a></span>NMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NMAT&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#a53928edd03902ad8c1a36bf2206f6e41">pspvfpu_deletecontext()</a>.</p>

</div>
</div>
<a id="ae18fd4698199e1ab4a6200fe8b684510" name="ae18fd4698199e1ab4a6200fe8b684510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae18fd4698199e1ab4a6200fe8b684510">&#9670;&#160;</a></span>SV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SV</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>N</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keyword">asm</span>(<span class="stringliteral">&quot;sv.q       c&quot;</span>#N<span class="stringliteral">&quot;00,  0 + %0, wt\n&quot;</span> \</div>
<div class="line">            <span class="stringliteral">&quot;sv.q       c&quot;</span>#N<span class="stringliteral">&quot;10, 16 + %0, wt\n&quot;</span> \</div>
<div class="line">            <span class="stringliteral">&quot;sv.q       c&quot;</span>#N<span class="stringliteral">&quot;20, 32 + %0, wt\n&quot;</span> \</div>
<div class="line">            <span class="stringliteral">&quot;sv.q       c&quot;</span>#N<span class="stringliteral">&quot;30, 48 + %0, wt\n&quot;</span> \</div>
<div class="line">            : <span class="stringliteral">&quot;=m&quot;</span> (c-&gt;fpregs[N * 4*4])         \</div>
<div class="line">            : : <span class="stringliteral">&quot;memory&quot;</span>)</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a53928edd03902ad8c1a36bf2206f6e41" name="a53928edd03902ad8c1a36bf2206f6e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53928edd03902ad8c1a36bf2206f6e41">&#9670;&#160;</a></span>pspvfpu_deletecontext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pspvfpu_deletecontext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpspvfpu__context.html">pspvfpu_context</a> *</td>          <td class="paramname"><span class="paramname"><em>context</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a VFPU context. </p>
<p>This frees the resources used by the VFPU context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The VFPU context to be deleted. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="#a81eeb3ca3337d4e47ad8fcd26536d857">NMAT</a>, and <a class="el" href="psptypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>.</p>

</div>
</div>
<a id="a56d82cb9dd0e9586871bc73a85935800" name="a56d82cb9dd0e9586871bc73a85935800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56d82cb9dd0e9586871bc73a85935800">&#9670;&#160;</a></span>pspvfpu_initcontext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpspvfpu__context.html">pspvfpu_context</a> * pspvfpu_initcontext </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare to use the VFPU. </p>
<p>This set's the calling thread's VFPU attribute, and returns a pointer to some VFPU state storage. The initial value all all VFPU matrix registers is undefined.</p>
<dl class="section return"><dt>Returns</dt><dd>A VFPU context </dd></dl>

<p class="reference">References <a class="el" href="psptypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="structpspvfpu__context.html#a0ffbd35beb129415132b3876042e3dcc">pspvfpu_context::owned</a>, <a class="el" href="group__ThreadMan.html#gga895c9fb39c6f2480e73f3a695b271011ad12b52dc01863c5862471f9746649142">PSP_THREAD_ATTR_VFPU</a>, <a class="el" href="group__ThreadMan.html#gaf951d0cf8f791972e4b467e16042364c">sceKernelChangeCurrentThreadAttr()</a>, <a class="el" href="structpspvfpu__context.html#a126578557d58366ac8637f1f612bee7c">pspvfpu_context::valid</a>, and <a class="el" href="pspvfpu_8h.html#ac70be9fa290482e53f0bccda7a6378e6">VFPU_ALIGNMENT</a>.</p>

</div>
</div>
<a id="a660efc6315092c80b449446cd3eed6a8" name="a660efc6315092c80b449446cd3eed6a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a660efc6315092c80b449446cd3eed6a8">&#9670;&#160;</a></span>pspvfpu_use_matrices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pspvfpu_use_matrices </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpspvfpu__context.html">pspvfpu_context</a> *</td>          <td class="paramname"><span class="paramname"><em>context</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pspvfpu_8h.html#aeba2787b48612341054003bf6574dc46">vfpumatrixset_t</a></td>          <td class="paramname"><span class="paramname"><em>keepset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pspvfpu_8h.html#aeba2787b48612341054003bf6574dc46">vfpumatrixset_t</a></td>          <td class="paramname"><span class="paramname"><em>tempset</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use a set of VFPU matrices. </p>
<p>This restores the parts of the VFPU state the caller wants restored (if necessary). If the caller was the previous user of the the matrix set, then this call is effectively a no-op. If a matrix has never been used by this context before, then it will initially have an undefined value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The VFPU context the caller wants to restore from. It is valid to pass NULL as a context. This means the caller wants to reserve a temporary matrix without affecting other VFPU users, but doesn't want any long-term matrices itself.</td></tr>
    <tr><td class="paramname">keepset</td><td>The set of matrices the caller wants to use, and keep the values persistently. <br  />
</td></tr>
    <tr><td class="paramname">tempset</td><td>A set of matrices the callers wants to use temporarily, but doesn't care about the values in the long-term. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="psptypes_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="structpspvfpu__context.html#a0ffbd35beb129415132b3876042e3dcc">pspvfpu_context::owned</a>, and <a class="el" href="structpspvfpu__context.html#a126578557d58366ac8637f1f612bee7c">pspvfpu_context::valid</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e3f561adfb255804fda30885544c499d.html">vfpu</a></li><li class="navelem"><a class="el" href="pspvfpu_8c.html">pspvfpu.c</a></li>
    <li class="footer">Generated on Mon Sep 15 2025 21:01:00 for PSPSDK by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
